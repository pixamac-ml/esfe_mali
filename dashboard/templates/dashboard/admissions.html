{% extends "base.html" %}
{% block title %}Admissions | Dashboard{% endblock %}

{% block content %}
<div class="p-6">
  <h1 class="text-2xl font-bold mb-6">Admissions récentes</h1>

  <div class="bg-white shadow rounded-lg overflow-hidden">
    <table class="w-full text-sm text-left">
      <thead class="bg-gray-100 text-gray-700 uppercase text-xs">
        <tr>
          <th class="px-4 py-2">Réf</th>
          <th class="px-4 py-2">Nom</th>
          <th class="px-4 py-2">Programme</th>
          <th class="px-4 py-2">Campus</th>
          <th class="px-4 py-2">Statut</th>
          <th class="px-4 py-2">Soumis le</th>
        </tr>
      </thead>
      <tbody>
        {% for adm in admissions %}
        <tr class="border-t hover:bg-gray-50">
          <td class="px-4 py-2 font-mono text-xs">{{ adm.ref_code }}</td>
          <td class="px-4 py-2">{{ adm.nom }} {{ adm.prenom }}</td>
          <td class="px-4 py-2">{{ adm.program.title }}</td>
          <td class="px-4 py-2">{{ adm.campus.name }}</td>
          <td class="px-4 py-2">
            <span class="px-2 py-1 text-xs rounded 
              {% if adm.status == 'RECU' %} bg-yellow-100 text-yellow-800 
              {% elif adm.status == 'PRET_PAIEMENT' %} bg-blue-100 text-blue-800 
              {% elif adm.status == 'PAIEMENT_OK' %} bg-green-100 text-green-800 
              {% elif adm.status == 'ADMIS' %} bg-emerald-100 text-emerald-800 
              {% else %} bg-gray-100 text-gray-800 {% endif %}">
              {{ adm.get_status_display }}
            </span>
          </td>
          <td class="px-4 py-2">{{ adm.submitted_at|date:"d/m/Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="px-4 py-6 text-center text-gray-500">
            Aucune admission pour le moment
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
