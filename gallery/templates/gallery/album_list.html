<!-- gallery/album_list.html -->
{% extends "base.html" %}
{% block title %}Galerie | ESFÃ© Mali{% endblock %}

{% block content %}
<section class="max-w-7xl mx-auto px-4 py-10">
  <h1 class="text-3xl font-bold mb-8">Galerie</h1>
  <div id="album-container">
    {% include "gallery/_album_items.html" %}
  </div>
</section>

<script>
document.addEventListener("click", async function(e) {
  const link = e.target.closest("a[data-album]");
  if(!link) return;
  e.preventDefault();
  const url = link.getAttribute("href");

  try {
    const res = await fetch(url, { headers: { "X-Requested-With": "XMLHttpRequest" } });
    if(!res.ok) return;
    const data = await res.json();
    document.getElementById("album-container").innerHTML = data.html;
    window.history.pushState({}, "", url);
    window.scrollTo({ top: 0, behavior: "smooth" });
  } catch(err) {
    console.error(err);
  }
});
</script>
{% endblock %}
