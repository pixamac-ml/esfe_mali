{% extends "base.html" %}
{% load static %}

{% block title %}Changer le mot de passe | ESFé Mali{% endblock %}

{% block content %}
<section class="min-h-screen flex items-center justify-center bg-slate-100 dark:bg-slate-900 py-10">
  <div class="w-full max-w-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-xl p-8">

    <div class="text-center mb-6">
      <img src="{% static 'img/logo_esfe.png' %}" alt="ESFé Mali" class="mx-auto h-12 mb-2">
      <h1 class="text-2xl font-bold text-cyan-700 dark:text-cyan-300">Changer le mot de passe</h1>
      <p class="text-sm text-slate-500 dark:text-slate-400">Sécurisez votre compte en quelques clics.</p>
    </div>

    {% if messages %}
      {% for message in messages %}
        <div class="mb-4 p-3 rounded-lg border 
                    {% if message.tags == 'success' %}
                        bg-green-100 text-green-700 border-green-300 dark:bg-green-900/30 dark:text-green-300
                    {% elif message.tags == 'error' %}
                        bg-red-100 text-red-700 border-red-300 dark:bg-red-900/30 dark:text-red-300
                    {% else %}
                        bg-slate-100 text-slate-700 border-slate-300 dark:bg-slate-700/30 dark:text-slate-300
                    {% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <form method="post" class="space-y-4">
      {% csrf_token %}
      {% for field in form %}
        <div>
          <label class="block text-sm font-medium text-slate-700 dark:text-slate-300">
            {{ field.label }}
          </label>
          {{ field }}
          {% if field.errors %}
            <p class="text-sm text-red-500 mt-1">{{ field.errors|join:", " }}</p>
          {% endif %}
        </div>
      {% endfor %}

      <button type="submit"
              class="w-full py-2.5 rounded-lg bg-cyan-700 hover:bg-cyan-600 active:bg-cyan-800 
                     text-white font-semibold flex items-center justify-center gap-2 transition-all shadow-md">
        <i data-lucide="lock" class="w-5 h-5"></i> <span>Enregistrer le nouveau mot de passe</span>
      </button>
    </form>

    <p class="mt-6 text-center text-sm text-slate-500 dark:text-slate-400">
      <a href="{% url 'masters:dashboard' %}" class="text-cyan-600 hover:text-cyan-500 hover:underline flex items-center justify-center gap-1">
        <i data-lucide="arrow-left" class="w-4 h-4"></i> Retour au tableau de bord
      </a>
    </p>
  </div>
</section>

<script>lucide.createIcons();</script>
{% endblock %}
